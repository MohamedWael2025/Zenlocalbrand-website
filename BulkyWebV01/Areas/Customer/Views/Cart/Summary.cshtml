@model ShoppingCartVM

<form method="post" class="zen-section">
    <!-- Header -->
    <div class="zen-flex justify-between items-center" style="margin-bottom: var(--zen-space-8);">
        <div>
            <h1 style="font-size: var(--zen-font-4xl); font-weight: 700;">Checkout</h1>
            <p style="color: var(--zen-text-secondary);">Complete your order</p>
        </div>
        <a asp-action="Index" class="zen-btn zen-btn-secondary">
            <i class="bi bi-arrow-left"></i>
            <span>Back to Cart</span>
        </a>
    </div>

    <div class="zen-grid zen-grid-3" style="align-items: start;">
        <!-- Shipping Details -->
        <div style="grid-column: span 2;">
            <div class="zen-card">
                <h2 style="font-size: var(--zen-font-2xl); font-weight: 700; margin-bottom: var(--zen-space-6);">
                    Shipping Details
                </h2>

                <div class="zen-grid zen-grid-2 zen-gap-4">
                    <div>
                        <label class="zen-label">Full Name <span style="color: #ef4444;">*</span></label>
                        <input asp-for="OrderHeader.Name" class="zen-input" required placeholder="Enter your name" />
                        <span asp-validation-for="OrderHeader.Name" class="text-danger"></span>
                    </div>

                    <div>
                        <label class="zen-label">Phone Number <span style="color: #ef4444;">*</span></label>
                        <input asp-for="OrderHeader.PhoneNumber" type="tel" class="zen-input" required placeholder="+20 XXX XXX XXXX" />
                        <span asp-validation-for="OrderHeader.PhoneNumber" class="text-danger"></span>
                    </div>

                    <div style="grid-column: span 2;">
                        <label class="zen-label">Street Address <span style="color: #ef4444;">*</span></label>
                        <input asp-for="OrderHeader.StreetAddress" class="zen-input" required placeholder="Street address" />
                        <span asp-validation-for="OrderHeader.StreetAddress" class="text-danger"></span>
                    </div>

                    <div>
                        <label class="zen-label">City <span style="color: #ef4444;">*</span></label>
                        <input asp-for="OrderHeader.City" class="zen-input" required placeholder="City" />
                        <span asp-validation-for="OrderHeader.City" class="text-danger"></span>
                    </div>

                    <div>
                        <label class="zen-label">State/Governorate <span style="color: #ef4444;">*</span></label>
                        <input asp-for="OrderHeader.State" class="zen-input" required placeholder="State" />
                        <span asp-validation-for="OrderHeader.State" class="text-danger"></span>
                    </div>

                    <div>
                        <label class="zen-label">Postal Code <span style="color: #ef4444;">*</span></label>
                        <input asp-for="OrderHeader.PostalCode" class="zen-input" required placeholder="12345" />
                        <span asp-validation-for="OrderHeader.PostalCode" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Order Summary -->
        <div>
            <div class="zen-card" style="position: sticky; top: 100px;">
                <h2 style="font-size: var(--zen-font-xl); font-weight: 700; margin-bottom: var(--zen-space-6);">
                    Order Summary
                </h2>

                <!-- Items -->
                <div style="margin-bottom: var(--zen-space-6);">
                    @foreach(var item in Model.ShoppingCartList)
                    {
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--zen-space-3); padding-bottom: var(--zen-space-3); border-bottom: 1px solid var(--zen-divider);">
                            <div>
                                <p style="font-weight: 600; margin-bottom: var(--zen-space-1);">@item.Product.Title</p>
                                <p style="font-size: var(--zen-font-sm); color: var(--zen-text-secondary);">Qty: @item.Count</p>
                            </div>
                            <p style="font-weight: 600;">@((item.Price * item.Count).ToString("N2")) EGP</p>
                        </div>
                    }
                </div>

                <!-- Totals -->
                <div style="padding-top: var(--zen-space-4); border-top: 2px solid var(--zen-border);">
                    <div style="display: flex; justify-content: space-between; margin-bottom: var(--zen-space-3);">
                        <span style="color: var(--zen-text-secondary);">Subtotal</span>
                        <span style="font-weight: 600;">@Model.OrderHeader.OrderTotal.ToString("N2") EGP</span>
                    </div>

                    <div style="display: flex; justify-content: space-between; margin-bottom: var(--zen-space-6);">
                        <span style="color: var(--zen-text-secondary);">Shipping</span>
                        <span style="color: var(--zen-accent); font-weight: 600;">Free</span>
                    </div>

                    <div style="display: flex; justify-content: space-between; padding-top: var(--zen-space-4); border-top: 1px solid var(--zen-border); margin-bottom: var(--zen-space-6);">
                        <span style="font-size: var(--zen-font-lg); font-weight: 700;">Total</span>
                        <span style="font-size: var(--zen-font-2xl); font-weight: 700;">@Model.OrderHeader.OrderTotal.ToString("N2") EGP</span>
                    </div>

                    <button type="submit" class="zen-btn zen-btn-primary" style="width: 100%;">
                        <span>Place Order</span>
                        <i class="bi bi-check-circle"></i>
                    </button>

                    <p style="margin-top: var(--zen-space-4); font-size: var(--zen-font-xs); color: var(--zen-text-tertiary); text-align: center;">
                        <i class="bi bi-lock-fill"></i> Secure payment via Paymob
                    </p>
                    
                    <p style="margin-top: var(--zen-space-2); font-size: var(--zen-font-xs); color: var(--zen-text-tertiary); text-align: center;">
                        <i class="bi bi-truck"></i> Estimated delivery: 5-7 business days
                    </p>
                </div>
            </div>
        </div>
    </div>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
